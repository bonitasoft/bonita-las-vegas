{
  "designerVersion" : "1.9.40",
  "id" : "accountingValidation",
  "name" : "accountingValidation",
  "lastUpdate" : 1561023784985,
  "rows" : [ [ {
    "type" : "container",
    "dimension" : {
      "xs" : 12,
      "sm" : 12,
      "md" : 4,
      "lg" : 3
    },
    "propertyValues" : {
      "cssClasses" : {
        "type" : "constant",
        "value" : ""
      },
      "hidden" : {
        "type" : "constant",
        "value" : false
      },
      "repeatedCollection" : {
        "type" : "variable",
        "value" : ""
      }
    },
    "reference" : "98852b7a-8ccf-400c-ac86-224c742d5fd8",
    "hasValidationError" : false,
    "id" : "pbContainer",
    "rows" : [ [ {
      "type" : "fragment",
      "dimension" : {
        "xs" : 12,
        "sm" : 12,
        "md" : 12,
        "lg" : 12
      },
      "propertyValues" : {
        "cssClasses" : {
          "type" : "constant",
          "value" : ""
        },
        "hidden" : {
          "type" : "constant",
          "value" : false
        }
      },
      "reference" : "149c6246-6acc-4787-91c4-dd5f9d734c20",
      "hasValidationError" : false,
      "id" : "ExpenseReportHeader",
      "binding" : {
        "amount" : "amount",
        "report" : "report"
      }
    } ], [ {
      "type" : "component",
      "dimension" : {
        "xs" : 12,
        "sm" : 12,
        "md" : 12,
        "lg" : 12
      },
      "propertyValues" : {
        "cssClasses" : {
          "type" : "constant",
          "value" : ""
        },
        "hidden" : {
          "type" : "constant",
          "value" : false
        },
        "availableValues" : {
          "type" : "constant",
          "value" : [ "Validate", "Invalidate", "Refuse" ]
        },
        "displayedKey" : {
          "type" : "constant"
        },
        "buttonStyles" : {
          "type" : "constant",
          "value" : [ "success", "warning", "danger" ]
        },
        "alignment" : {
          "type" : "constant",
          "value" : "center"
        },
        "modalIds" : {
          "type" : "constant",
          "value" : [ "validate", "invalidate", "refuse" ]
        },
        "verticalAlignement" : {
          "type" : "constant",
          "value" : false
        }
      },
      "reference" : "861a616f-71e9-4bd4-b6be-7a1fcfb11493",
      "hasValidationError" : false,
      "id" : "customModalGroupButtons"
    } ] ]
  }, {
    "type" : "fragment",
    "dimension" : {
      "xs" : 12,
      "sm" : 12,
      "md" : 8,
      "lg" : 9
    },
    "propertyValues" : {
      "cssClasses" : {
        "type" : "constant",
        "value" : ""
      },
      "hidden" : {
        "type" : "constant",
        "value" : false
      }
    },
    "reference" : "9e577147-423d-40ca-b517-7b84d9f4cf4c",
    "hasValidationError" : false,
    "id" : "ExpenseReportOverview",
    "binding" : {
      "report" : "report",
      "caseDocuments" : "caseDocuments",
      "caseComments" : "caseComments",
      "caseId" : "task.caseId",
      "commentAdded" : "commentAdded",
      "displayHistoryButton" : "displayHistory",
      "hideHistoryButton" : ""
    }
  } ], [ {
    "type" : "modalContainer",
    "dimension" : {
      "xs" : 12,
      "sm" : 12,
      "md" : 12,
      "lg" : 12
    },
    "propertyValues" : {
      "cssClasses" : {
        "type" : "constant",
        "value" : ""
      },
      "modalId" : {
        "type" : "constant",
        "value" : "validate"
      },
      "size" : {
        "type" : "constant",
        "value" : ""
      },
      "animation" : {
        "type" : "constant",
        "value" : true
      }
    },
    "reference" : "c0c4180d-24f6-4c51-bbfd-8d7284d39805",
    "hasValidationError" : false,
    "id" : "pbModalContainer",
    "container" : {
      "type" : "container",
      "dimension" : {
        "xs" : 12
      },
      "propertyValues" : { },
      "reference" : "f97ab8fd-03f2-4f86-8c6e-a65a4bc5623c",
      "hasValidationError" : false,
      "id" : "pbContainer",
      "rows" : [ [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "text" : {
            "type" : "interpolation",
            "value" : "Validate"
          },
          "level" : {
            "type" : "constant",
            "value" : "Level 2"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "center"
          }
        },
        "reference" : "2797e2f2-41d5-44af-941e-53f041266126",
        "hasValidationError" : false,
        "id" : "pbTitle"
      } ], [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "labelHidden" : {
            "type" : "constant",
            "value" : true
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Default label"
          },
          "labelPosition" : {
            "type" : "constant",
            "value" : "top"
          },
          "labelWidth" : {
            "type" : "constant",
            "value" : 4
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : true
          },
          "text" : {
            "type" : "interpolation",
            "value" : "The expense report is <strong>valid</strong>"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "center"
          }
        },
        "reference" : "7fe80e66-2004-433e-8c79-1451abcbe620",
        "hasValidationError" : false,
        "id" : "pbText"
      } ], [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "disabled" : {
            "type" : "constant",
            "value" : false
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Send"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "center"
          },
          "buttonStyle" : {
            "type" : "constant",
            "value" : "success"
          },
          "action" : {
            "type" : "constant",
            "value" : "Submit task"
          },
          "assign" : {
            "type" : "constant",
            "value" : true
          },
          "url" : {
            "type" : "interpolation"
          },
          "responseStatusCode" : {
            "type" : "variable",
            "value" : ""
          },
          "dataToSend" : {
            "type" : "expression",
            "value" : "ValidFormOutput"
          },
          "dataFromSuccess" : {
            "type" : "variable",
            "value" : ""
          },
          "closeOnSuccess" : {
            "type" : "constant",
            "value" : true
          },
          "dataFromError" : {
            "type" : "variable",
            "value" : "formOutput._submitError"
          },
          "targetUrlOnSuccess" : {
            "type" : "interpolation",
            "value" : "../management"
          },
          "collectionToModify" : {
            "type" : "variable"
          },
          "modalId" : {
            "type" : "constant",
            "value" : ""
          },
          "collectionPosition" : {
            "type" : "constant",
            "value" : "Last"
          },
          "valueToAdd" : {
            "type" : "constant"
          },
          "removeItem" : {
            "type" : "variable"
          }
        },
        "reference" : "c957bda7-a2e2-4c80-9d6d-ff5737302384",
        "hasValidationError" : false,
        "id" : "pbButton"
      } ] ]
    }
  } ], [ {
    "type" : "modalContainer",
    "dimension" : {
      "xs" : 12,
      "sm" : 12,
      "md" : 12,
      "lg" : 12
    },
    "propertyValues" : {
      "cssClasses" : {
        "type" : "constant",
        "value" : ""
      },
      "modalId" : {
        "type" : "constant",
        "value" : "invalidate"
      },
      "size" : {
        "type" : "constant",
        "value" : ""
      },
      "animation" : {
        "type" : "expression",
        "value" : "modalAnimation"
      }
    },
    "reference" : "3af8e952-ce9b-4dc0-804d-bc3097d2db92",
    "hasValidationError" : false,
    "id" : "pbModalContainer",
    "container" : {
      "type" : "container",
      "dimension" : {
        "xs" : 12
      },
      "propertyValues" : { },
      "reference" : "42402555-509a-41b1-a69b-abb60dfe9cd0",
      "hasValidationError" : false,
      "id" : "pbContainer",
      "rows" : [ [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "text" : {
            "type" : "interpolation",
            "value" : "Invalidate"
          },
          "level" : {
            "type" : "constant",
            "value" : "Level 2"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "center"
          }
        },
        "reference" : "a1de1a5e-e4a4-487a-a3f0-9f55be1618e2",
        "hasValidationError" : false,
        "id" : "pbTitle"
      } ], [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "labelHidden" : {
            "type" : "constant",
            "value" : true
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Default label"
          },
          "labelPosition" : {
            "type" : "constant",
            "value" : "top"
          },
          "labelWidth" : {
            "type" : "constant",
            "value" : 4
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : true
          },
          "text" : {
            "type" : "interpolation",
            "value" : "The expense report is <strong>invalid</strong>: The employee has to make some changes to make it valid.\n<br/>\nSpecify the expected changes in a <strong>comment</strong>:"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "center"
          }
        },
        "reference" : "19c648c1-f8a4-48c7-968c-a02b253f7484",
        "hasValidationError" : false,
        "id" : "pbText"
      } ], [ {
        "type" : "fragment",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          }
        },
        "reference" : "50691852-9c98-44a9-a4e4-3a71c609a326",
        "hasValidationError" : false,
        "id" : "addComment",
        "binding" : {
          "commentAdded" : "commentAddedInModal",
          "caseId" : "task.caseId"
        }
      } ], [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "expression",
            "value" : "!commentAddedInModal.id"
          },
          "labelHidden" : {
            "type" : "constant",
            "value" : true
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Default label"
          },
          "labelPosition" : {
            "type" : "constant",
            "value" : "top"
          },
          "labelWidth" : {
            "type" : "constant",
            "value" : 4
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : true
          },
          "text" : {
            "type" : "interpolation",
            "value" : "<p class=\"text-success\">Comment added successfully!</p>"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "center"
          }
        },
        "reference" : "58ce25eb-cf61-4209-bfdd-c5cf275acf3b",
        "hasValidationError" : false,
        "id" : "pbText"
      } ], [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "disabled" : {
            "type" : "expression",
            "value" : "! commentAddedInModal.id"
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Send"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "center"
          },
          "buttonStyle" : {
            "type" : "constant",
            "value" : "warning"
          },
          "action" : {
            "type" : "constant",
            "value" : "Submit task"
          },
          "assign" : {
            "type" : "constant",
            "value" : true
          },
          "url" : {
            "type" : "interpolation"
          },
          "responseStatusCode" : {
            "type" : "variable",
            "value" : ""
          },
          "dataToSend" : {
            "type" : "expression",
            "value" : "InvalidFormOutput"
          },
          "dataFromSuccess" : {
            "type" : "variable",
            "value" : ""
          },
          "closeOnSuccess" : {
            "type" : "constant",
            "value" : true
          },
          "dataFromError" : {
            "type" : "variable",
            "value" : "formOutput._submitError"
          },
          "targetUrlOnSuccess" : {
            "type" : "interpolation",
            "value" : "../management"
          },
          "collectionToModify" : {
            "type" : "variable"
          },
          "modalId" : {
            "type" : "constant",
            "value" : ""
          },
          "collectionPosition" : {
            "type" : "constant",
            "value" : "Last"
          },
          "valueToAdd" : {
            "type" : "constant"
          },
          "removeItem" : {
            "type" : "variable"
          }
        },
        "reference" : "ccb621e9-65d7-47eb-a05f-6f7c492022c1",
        "hasValidationError" : false,
        "id" : "pbButton"
      } ] ]
    }
  } ], [ {
    "type" : "modalContainer",
    "dimension" : {
      "xs" : 12,
      "sm" : 12,
      "md" : 12,
      "lg" : 12
    },
    "propertyValues" : {
      "cssClasses" : {
        "type" : "constant",
        "value" : ""
      },
      "modalId" : {
        "type" : "constant",
        "value" : "refuse"
      },
      "size" : {
        "type" : "constant",
        "value" : ""
      },
      "animation" : {
        "type" : "expression",
        "value" : "modalAnimation"
      }
    },
    "reference" : "f3bc8612-cf58-4790-93ec-2cfed502ae52",
    "hasValidationError" : false,
    "id" : "pbModalContainer",
    "container" : {
      "type" : "container",
      "dimension" : {
        "xs" : 12
      },
      "propertyValues" : { },
      "reference" : "1fb08485-1a50-462f-bf2c-c89e1b9775e2",
      "hasValidationError" : false,
      "id" : "pbContainer",
      "rows" : [ [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "text" : {
            "type" : "interpolation",
            "value" : "Refuse"
          },
          "level" : {
            "type" : "constant",
            "value" : "Level 2"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "center"
          }
        },
        "reference" : "04f7d42d-1252-42ce-a2f3-ff368d221ba8",
        "hasValidationError" : false,
        "id" : "pbTitle"
      } ], [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "labelHidden" : {
            "type" : "constant",
            "value" : true
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Default label"
          },
          "labelPosition" : {
            "type" : "constant",
            "value" : "top"
          },
          "labelWidth" : {
            "type" : "constant",
            "value" : 4
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : true
          },
          "text" : {
            "type" : "interpolation",
            "value" : "The expense report is <strong>refused</strong>: The employee will not be refunded.\n<br/>\nYou can indicate the reason in a <strong>comment</strong> if you want to:"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "center"
          }
        },
        "reference" : "9fd9abbe-a5ff-4e4e-8212-c0270d4582f0",
        "hasValidationError" : false,
        "id" : "pbText"
      } ], [ {
        "type" : "fragment",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          }
        },
        "reference" : "40f77501-2c3e-4f70-95cc-ee992b42d64c",
        "hasValidationError" : false,
        "id" : "addComment",
        "binding" : {
          "commentAdded" : "commentAddedInModal",
          "caseId" : "task.caseId"
        }
      } ], [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "expression",
            "value" : "!commentAddedInModal.id"
          },
          "labelHidden" : {
            "type" : "constant",
            "value" : true
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Default label"
          },
          "labelPosition" : {
            "type" : "constant",
            "value" : "top"
          },
          "labelWidth" : {
            "type" : "constant",
            "value" : 4
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : true
          },
          "text" : {
            "type" : "interpolation",
            "value" : "<p class=\"text-success\">Comment added successfully!</p>"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "center"
          }
        },
        "reference" : "5e9f6920-51cc-4116-82cc-4d6da9679765",
        "hasValidationError" : false,
        "id" : "pbText"
      } ], [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "disabled" : {
            "type" : "expression",
            "value" : "! commentAddedInModal.id"
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Send"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "center"
          },
          "buttonStyle" : {
            "type" : "constant",
            "value" : "danger"
          },
          "action" : {
            "type" : "constant",
            "value" : "Submit task"
          },
          "assign" : {
            "type" : "constant",
            "value" : true
          },
          "url" : {
            "type" : "interpolation"
          },
          "responseStatusCode" : {
            "type" : "variable",
            "value" : ""
          },
          "dataToSend" : {
            "type" : "expression",
            "value" : "RefusedFormOutput"
          },
          "dataFromSuccess" : {
            "type" : "variable",
            "value" : ""
          },
          "closeOnSuccess" : {
            "type" : "constant",
            "value" : true
          },
          "dataFromError" : {
            "type" : "variable",
            "value" : "formOutput._submitError"
          },
          "targetUrlOnSuccess" : {
            "type" : "interpolation",
            "value" : "../management"
          },
          "collectionToModify" : {
            "type" : "variable"
          },
          "modalId" : {
            "type" : "constant",
            "value" : ""
          },
          "collectionPosition" : {
            "type" : "constant",
            "value" : "Last"
          },
          "valueToAdd" : {
            "type" : "constant"
          },
          "removeItem" : {
            "type" : "variable"
          }
        },
        "reference" : "282bb92e-ea31-4594-9c88-c34a396d92d6",
        "hasValidationError" : false,
        "id" : "pbButton"
      } ] ]
    }
  } ] ],
  "assets" : [ {
    "id" : "aa72b63c-ad91-4416-922e-1d99f63c88db",
    "name" : "style.css",
    "type" : "css",
    "order" : 0,
    "external" : false
  }, {
    "id" : "a821323c-bd29-4fe4-aa65-5e8edb2f95c9",
    "name" : "moment.js",
    "type" : "js",
    "order" : 2,
    "external" : false
  }, {
    "id" : "44ba1b31-fd1d-4768-bbd3-2e225bdcf4da",
    "name" : "filters.js",
    "type" : "js",
    "order" : 1,
    "external" : false
  }, {
    "id" : "735081a3-e504-4f91-8c5e-27a098e26858",
    "name" : "localization.json",
    "type" : "json",
    "order" : 0,
    "external" : false
  } ],
  "inactiveAssets" : [ ],
  "data" : {
    "task" : {
      "type" : "url",
      "value" : "../API/bpm/userTask/{{taskId}}",
      "exposed" : false
    },
    "submit_errors_list" : {
      "type" : "expression",
      "value" : "if($data.formOutput && $data.formOutput._submitError && $data.formOutput._submitError.explanations){\n\tconst liElements = $data.formOutput._submitError.explanations\n\t\t.filter(cause => cause !== null)\n\t\t.map(cause => \"<li>\" + cause + \"</li>\")\n\t\t.join('');\n\tif(liElements){\n\t\treturn \"<ul>\" + liElements + \"</ul>\";\n\t}\n}",
      "exposed" : false
    },
    "context" : {
      "type" : "url",
      "value" : "../API/bpm/userTask/{{taskId}}/context",
      "exposed" : false
    },
    "taskId" : {
      "type" : "urlparameter",
      "value" : "id",
      "exposed" : false
    },
    "report" : {
      "type" : "url",
      "value" : "../{{context.expenseReport_ref.link}}",
      "exposed" : false
    },
    "caseDocuments" : {
      "type" : "url",
      "value" : "../API/extension/caseDocument?caseId={{task.caseId}}",
      "exposed" : false
    },
    "caseComments" : {
      "type" : "url",
      "value" : "../API/extension/caseComment?caseId={{task.caseId}}&reload={{commentAdded.id + commentAddedInModal.id}}",
      "exposed" : false
    },
    "commentAdded" : {
      "type" : "json",
      "value" : "{ \"id\" : \"\" }",
      "exposed" : false
    },
    "ValidFormOutput" : {
      "type" : "json",
      "value" : "{ \"accountingValidationData\" : \"Valid\" }\t",
      "exposed" : false
    },
    "InvalidFormOutput" : {
      "type" : "json",
      "value" : "{ \"accountingValidationData\" : \"Invalid\" }",
      "exposed" : false
    },
    "RefusedFormOutput" : {
      "type" : "json",
      "value" : "{ \"accountingValidationData\" : \"Refused\" }",
      "exposed" : false
    },
    "errors" : {
      "type" : "json",
      "value" : "{}",
      "exposed" : false
    },
    "amount" : {
      "type" : "expression",
      "value" : "var amount = 0;\n$data.report.expenseLine.forEach(function(e){\n    amount += e.amount;\n});\nreturn amount;",
      "exposed" : false
    },
    "commentAddedInModal" : {
      "type" : "json",
      "value" : "{ \"id\" : \"\" }",
      "exposed" : false
    },
    "modalAnimation" : {
      "type" : "expression",
      "value" : "if($data.commentAddedInModal.id) {\n    $data.commentAddedInModal.id = \"\";\n}\nreturn true;",
      "exposed" : false
    }
  },
  "hasValidationError" : false,
  "uuid" : "ecfe259a-c2e5-4dd1-a87f-ab820ec0b24f",
  "type" : "form",
  "description" : "Page generated with Bonita UI designer"
}